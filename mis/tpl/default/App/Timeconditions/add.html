<extend name=":main" />
<block name="scripts_extend">
	<script>
		function editController($scope,$http){
			
			/*save*/
			$scope.save=function(){
				sp_add({
					url:"__API_ROOT__index.pl?action=addschedule&domain_uuid="+current_domain_uuid,
					params:$scope.vo,
					redirect:"[{:u('timeconditions/index')}]"
				},$scope,$http);
			}
			
			
			$scope.template_onchange=function(){
				var template=$scope.vo.template2;
				if (template == "Office Hours Mon-Fri 8am-5pm") {
					$scope.vo.condition_hour= '';
					$scope.vo.condition_minute='';
					$scope.vo.condition_minute_of_day='480-1020';
					$scope.vo.condition_mday='';
					$scope.vo.condition_mweek='';
					$scope.vo.condition_mon='';
					$scope.vo.condition_yday='';
					$scope.vo.condition_year='';
					$scope.vo.condition_wday='2-6';
					$scope.vo.condition_week='';
				}
				else if (template == "Office Hours Mon-Fri 9am-6pm") {
					$scope.vo.condition_hour='';
					$scope.vo.condition_minute='';
					$scope.vo.condition_minute_of_day='540-1080';
					$scope.vo.condition_mday='';
					$scope.vo.condition_mweek='';
					$scope.vo.condition_mon='';
					$scope.vo.condition_yday='';
					$scope.vo.condition_year='';
					$scope.vo.condition_wday='2-6';
					$scope.vo.condition_week='';
				}
				else if (template == "New Year's Day") {
					$scope.vo.condition_hour='';
					$scope.vo.condition_minute='';
					$scope.vo.condition_minute_of_day='';
					$scope.vo.condition_mday='1';
					$scope.vo.condition_mweek='';
					$scope.vo.condition_mon='1';
					$scope.vo.condition_yday='';
					$scope.vo.condition_year='';
					$scope.vo.condition_wday='';
					$scope.vo.condition_week='';
				}
				else if (template == "Martin Luther King Jr Day") {
					$scope.vo.condition_hour='';
					$scope.vo.condition_minute='';
					$scope.vo.condition_minute_of_day='';
					$scope.vo.condition_mday='';
					$scope.vo.condition_mweek='3';
					$scope.vo.condition_mon='1';
					$scope.vo.condition_yday='';
					$scope.vo.condition_year='';
					$scope.vo.condition_wday='2';
					$scope.vo.condition_week='';
				}
				else if (template == "Presidents Day") {
					$scope.vo.condition_hour='';
					$scope.vo.condition_minute='';
					$scope.vo.condition_minute_of_day='';
					$scope.vo.condition_mday='';
					$scope.vo.condition_mweek='3';
					$scope.vo.condition_mon='2';
					$scope.vo.condition_yday='';
					$scope.vo.condition_year='';
					$scope.vo.condition_wday='2';
					$scope.vo.condition_week='';
				}
				else if (template == "Memorial Day") {
					$scope.vo.condition_hour='';
					$scope.vo.condition_minute='';
					$scope.vo.condition_minute_of_day='';
					$scope.vo.condition_mday='25-31';
					$scope.vo.condition_mweek='';
					$scope.vo.condition_mon='5';
					$scope.vo.condition_yday='';
					$scope.vo.condition_year='';
					$scope.vo.condition_wday='2';
					$scope.vo.condition_week='';
				}
				else if (template == "Independence Day") {
					$scope.vo.condition_hour='';
					$scope.vo.condition_minute='';
					$scope.vo.condition_minute_of_day='';
					$scope.vo.condition_mday='4';
					$scope.vo.condition_mweek='';
					$scope.vo.condition_mon='7';
					$scope.vo.condition_yday='';
					$scope.vo.condition_year='';
					$scope.vo.condition_wday='';
					$scope.vo.condition_week='';
				}
				else if (template == "Labor Day") {
					$scope.vo.condition_hour='';
					$scope.vo.condition_minute='';
					$scope.vo.condition_minute_of_day='';
					$scope.vo.condition_mday='';
					$scope.vo.condition_mweek='1';
					$scope.vo.condition_mon='9';
					$scope.vo.condition_yday='';
					$scope.vo.condition_year='';
					$scope.vo.condition_wday='2';
					$scope.vo.condition_week='';
				}
				else if (template == "Columbus Day") {
					$scope.vo.condition_hour='';
					$scope.vo.condition_minute='';
					$scope.vo.condition_minute_of_day='';
					$scope.vo.condition_mday='';
					$scope.vo.condition_mweek='2';
					$scope.vo.condition_mon='10';
					$scope.vo.condition_yday='';
					$scope.vo.condition_year='';
					$scope.vo.condition_wday='2';
					$scope.vo.condition_week='';
				}
				else if (template == "Veteran's Day") {
					$scope.vo.condition_hour='';
					$scope.vo.condition_minute='';
					$scope.vo.condition_minute_of_day='';
					$scope.vo.condition_mday='11';
					$scope.vo.condition_mweek='';
					$scope.vo.condition_mon='11';
					$scope.vo.condition_yday='';
					$scope.vo.condition_year='';
					$scope.vo.condition_wday='';
					$scope.vo.condition_week='';
				}
				else if (template == "Thanksgiving") {
					$scope.vo.condition_hour='';
					$scope.vo.condition_minute='';
					$scope.vo.condition_minute_of_day='';
					$scope.vo.condition_mday='';
					$scope.vo.condition_mweek='4';
					$scope.vo.condition_mon='11';
					$scope.vo.condition_yday='';
					$scope.vo.condition_year='';
					$scope.vo.condition_wday='5-6';
					$scope.vo.condition_week='';
				}
				else if (template == "Christmas") {
					$scope.vo.condition_hour='';
					$scope.vo.condition_minute='';
					$scope.vo.condition_minute_of_day='';
					$scope.vo.condition_mday='25';
					$scope.vo.condition_mweek='';
					$scope.vo.condition_mon='12';
					$scope.vo.condition_yday='';
					$scope.vo.condition_year='';
					$scope.vo.condition_wday='';
					$scope.vo.condition_week='';
				}
			}
		}
		
	</script>
</block>

<block name="content">
<ul class="nav nav-tabs">
   <li><a href="[{:u('timeconditions/index')}]">Time Conditions</a></li>
   <li class="active"><a href="[{:u('timeconditions/add')}]">Add Time Condition</a></li>
  </ul>
  <div class="well">
  	The public dialplan is used to route incoming calls to destinations based on one or more conditions and context. 
  	It can send incoming calls to an auto attendant, huntgroup, extension, external number, or a script. 
  </div>
<form class="form-horizontal"  ng-controller="editController"  ng-submit="save()" name="form">

	<div class="control-group">
		<label class="control-label" for="input-name"> Name: </label>
		<div class="controls">
			<input  type="text" name="dialplan_name" ng-model="vo.dialplan_name" maxlength="255" required>
			<br> Enter the name for the time condition.
		</div>
	</div>
	<div class="control-group">
		<label class="control-label" for="input-name"> Extension: </label>
		<div class="controls">
			<input  type="text"
				name="dialplan_number" ng-model="vo.dialplan_number" id="dialplan_number" maxlength="255" value=""><br>
			Enter the extension number.<br>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label" for="input-name"> Template: </label>
		<div class="controls">
			<select  name="template2" ng-model="vo.template2" id="template" ng-change="template_onchange()">
				<option value=""></option>
				<optgroup label="Office">
					<option value="Office Hours Mon-Fri 8am-5pm">Office Hours Mon-Fri 8am-5pm</option>
					<option value="Office Hours Mon-Fri 9am-6pm">Office Hours Mon-Fri 9am-6pm</option>
				</optgroup>
				<optgroup label="US Holidays">
					<option value="New Year's Day">New Year\'s Day</option>
					<option value="Martin Luther King Jr Day">Martin Luther King Jr Day</option>
					<option value="Presidents Day">Presidents Day</option>
					<option value="Memorial Day">Memorial Day</option>
					<option value="Independence Day">Independence Day</option>
					<option value="Labor Day">Labor Day</option>
					<option value="Columbus Day">Columbus Day</option>
					<option value="Veteran's Day">Veteran\'s Day</option>
					<option value="Thanksgiving">Thanksgiving</option>
					<option value="Christmas">Christmas</option>
				</optgroup>
			</select>
			<br> The templates provides a list of preset time conditions.
		</div>
	</div>
	<div class="control-group">
		<label class="control-label" for="input-name"> Day of Month: </label>
		<div class="controls">
			<input type="text" name="condition_mday" ng-model="vo.condition_mday" id="condition_mday" maxlength="255" value="">
			<br> Enter the day of the month. 1-31 <i>mday</i>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label" for="input-name"> Day of Week: </label>
		<div class="controls">
			<input type="text" name="condition_wday" ng-model="vo.condition_wday" id="condition_wday" maxlength="255" value="">
			<br>Enter the day of the week. 1-7 (Sun=1, Mon=2, Tues=3) <i>wday</i>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label" for="input-name"> Minute of Day:
		</label>
		<div class="controls">
			<input type="text"
				name="condition_minute_of_day" ng-model="vo.condition_minute_of_day" id="condition_minute_of_day"
				maxlength="255" value=""><br> Enter the minute of the
			day. 1-1440 (midnight = 1, 8am=480, 9am=540, 6pm=1080) <i>minute-of-day</i><br>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label" for="input-name"> Month: </label>
		<div class="controls">
			<input type="text"
				name="condition_mon" ng-model="vo.condition_mon" id="condition_mon" maxlength="255" value=""><br>
			Enter the month. 1-12 (Jan=1, Feb=2, Mar=3, April=4, May=5, Jun=6,
			July=7 etc.) <i>mon</i><br>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label" for="input-name"> Week of Month:
		</label>
		<div class="controls">
			<input type="text"
				name="condition_mweek" ng-model="vo.condition_mweek" id="condition_mweek" maxlength="255" value=""><br>
			Enter the week of the month. 1-6 <i>mweek</i><br>
			<br>
		</div>
	</div>
	<div class="advanced">
		<div class="control-group">
			<label class="control-label" for="input-name"> Day of Year: </label>
			<div class="controls">
				<input type="text"
					name="condition_yday" ng-model="vo.condition_yday" id="condition_yday" maxlength="255" value=""><br>
				Enter the day of the year. 1-365 <i>yday</i> <br>
			</div>
		</div>
		<div class="control-group">
			<label class="control-label" for="input-name"> Hour: </label>
			<div class="controls">
				<input type="text"
					name="condition_hour" ng-model="vo.condition_hour" id="condition_hour" maxlength="255" value=""><br>
				Enter the hour. 0-23 <i>hour</i> <br>
			</div>
		</div>
		<div class="control-group">
			<label class="control-label" for="input-name"> Minute: </label>
			<div class="controls">
				<input type="text"
					name="condition_minute" ng-model="vo.condition_minute" id="condition_minute" maxlength="255"
					value=""><br> Enter the minute. 0-59 <i>minute</i> <br>
			</div>
		</div>
		<div class="control-group">
			<label class="control-label" for="input-name"> Week: </label>
			<div class="controls">
				<input type="text"
					name="condition_week" ng-model="vo.condition_week" id="condition_week" maxlength="255" value=""><br>
				Enter the week. 1-52 <i>week</i> <br>
			</div>
		</div>
		<div class="control-group">
			<label class="control-label" for="input-name"> Year: </label>
			<div class="controls">
				<input type="text"
					name="condition_year" ng-model="vo.condition_year" id="condition_year" maxlength="255" value=""><br>
				Enter the year. 0-9999 <i>year</i> <br>
			</div>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label" for="input-name"> Action when
			True: </label>
		<div class="controls">
			<select name="action_1" ng-model="vo.action_1" id="action_1"  required>
				<option></option>
				<optgroup label="Call Center"></optgroup>
				<optgroup label="Call Flows"></optgroup>
				<optgroup label="Call Group"></optgroup>
				<optgroup label="Extensions">
					<option value="transfer:1000 XML default">1000</option>
					<option value="transfer:1001 XML default">1001</option>
					<option value="transfer:1002 XML default">1002</option>
					<option value="transfer:1003 XML default">1003</option>
				</optgroup>
				<optgroup label="FAX"></optgroup>
				<optgroup label="FIFO"></optgroup>
				<optgroup label="Gateways"></optgroup>
				<optgroup label="IVR Menu"></optgroup>
				<optgroup label="Language">
					<option value="set:default_language=nl">Dutch</option>
					<option value="set:default_language=en">English</option>
					<option value="set:default_language=fr">French</option>
					<option value="set:default_language=it">Italian</option>
					<option value="set:default_language=de">German</option>
					<option value="set:default_language=pt-pt">Portuguese -
						Portugal</option>
					<option value="set:default_language=pt-br">Portuguese -
						Brazil</option>
					<option value="set:default_language=es">Spanish</option>
				</optgroup>
				<optgroup label="Recordings"></optgroup>
				<optgroup label="Ring Groups"></optgroup>
				<optgroup label="Time Conditions">
					<option value="transfer:timeconidtion-10000 XML ">timeconidtion-10000
						t1</option>
				</optgroup>
				<optgroup label="Voicemail">
					<option value="transfer:*991000 XML ">1000</option>
					<option value="transfer:*991001 XML ">1001</option>
					<option value="transfer:*991002 XML ">1002</option>
					<option value="transfer:*991003 XML ">1003</option>
				</optgroup>
				<optgroup label="Other">
					<option value="answer">answer</option>
					<option value="bridge:">bridge</option>
					<option value="db:">db</option>
					<option value="export:">export</option>
					<option value="global_set:">global_set</option>
					<option value="group:">group</option>
					<option value="hangup">hangup</option>
					<option value="info">info</option>
					<option value="javascript:">javascript</option>
					<option value="lua:">lua</option>
					<option value="perl:">perl</option>
					<option value="reject">reject</option>
					<option value="set:">set</option>
					<option value="sleep:">sleep</option>
					<option value="transfer:">transfer</option>
					<option value="">other</option>
					<option value="" selected></option>
				</optgroup></select><input type="button" id="btn_select_to_input_action_1" class="btn"
				name="" alt="back"
				onclick='changeToInputaction_1($scope.vo.action_1"));this.style.visibility = "hidden";'
				value="&lt;">
		</div>
	</div>
	<div class="control-group">
		<label class="control-label" for="input-name"> Action when
			False: </label>
		<div class="controls">
			<select name="anti_action_1" ng-model="vo.anti_action_1" id="anti_action_1">
				<option></option>
				<optgroup label="Call Center"></optgroup>
				<optgroup label="Call Flows"></optgroup>
				<optgroup label="Call Group"></optgroup>
				<optgroup label="Extensions">
					<option value="transfer:1000 XML default">1000</option>
					<option value="transfer:1001 XML default">1001</option>
					<option value="transfer:1002 XML default">1002</option>
					<option value="transfer:1003 XML default">1003</option>
				</optgroup>
				<optgroup label="FAX"></optgroup>
				<optgroup label="FIFO"></optgroup>
				<optgroup label="Gateways"></optgroup>
				<optgroup label="IVR Menu"></optgroup>
				<optgroup label="Language">
					<option value="set:default_language=nl">Dutch</option>
					<option value="set:default_language=en">English</option>
					<option value="set:default_language=fr">French</option>
					<option value="set:default_language=it">Italian</option>
					<option value="set:default_language=de">German</option>
					<option value="set:default_language=pt-pt">Portuguese -
						Portugal</option>
					<option value="set:default_language=pt-br">Portuguese -
						Brazil</option>
					<option value="set:default_language=es">Spanish</option>
				</optgroup>
				<optgroup label="Recordings"></optgroup>
				<optgroup label="Ring Groups"></optgroup>
				<optgroup label="Time Conditions">
					<option value="transfer:timeconidtion-10000 XML ">timeconidtion-10000
						t1</option>
				</optgroup>
				<optgroup label="Voicemail">
					<option value="transfer:*991000 XML ">1000</option>
					<option value="transfer:*991001 XML ">1001</option>
					<option value="transfer:*991002 XML ">1002</option>
					<option value="transfer:*991003 XML ">1003</option>
				</optgroup>
				<optgroup label="Other">
					<option value="answer">answer</option>
					<option value="bridge:">bridge</option>
					<option value="db:">db</option>
					<option value="export:">export</option>
					<option value="global_set:">global_set</option>
					<option value="group:">group</option>
					<option value="hangup">hangup</option>
					<option value="info">info</option>
					<option value="javascript:">javascript</option>
					<option value="lua:">lua</option>
					<option value="perl:">perl</option>
					<option value="reject">reject</option>
					<option value="set:">set</option>
					<option value="sleep:">sleep</option>
					<option value="transfer:">transfer</option>
					<option value="">other</option>
					<option value="" selected></option>
				</optgroup></select><input type="button" id="btn_select_to_input_anti_action_1"
				class="btn" name="" alt="back"
				onclick='changeToInputanti_action_1($scope.vo.anti_action_1"));this.style.visibility = "hidden";'
				value="&lt;">
			<div id="desc_anti_action_data_1"></div>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label" for="input-name"> Order: </label>
		<div class="controls">
			<select name="dialplan_order" ng-model="vo.dialplan_order"  ><option
					value="300">300</option>
				<option value="310">310</option>
				<option value="320">320</option>
				<option value="330">330</option>
				<option value="340">340</option>
				<option value="350">350</option>
				<option value="360">360</option>
				<option value="370">370</option>
				<option value="380">380</option>
				<option value="390">390</option>
				<option value="400">400</option>
				<option value="410">410</option>
				<option value="420">420</option>
				<option value="430">430</option>
				<option value="440">440</option>
				<option value="450">450</option>
				<option value="460">460</option>
				<option value="470">470</option>
				<option value="480">480</option>
				<option value="490">490</option>
				<option value="500">500</option>
				<option value="510">510</option>
				<option value="520">520</option>
				<option value="530">530</option>
				<option value="540">540</option>
				<option value="550">550</option>
				<option value="560">560</option>
				<option value="570">570</option>
				<option value="580">580</option>
				<option value="590">590</option>
				<option value="600">600</option>
				<option value="610">610</option>
				<option value="620">620</option>
				<option value="630">630</option>
				<option value="640">640</option>
				<option value="650">650</option>
				<option value="660">660</option>
				<option value="670">670</option>
				<option value="680">680</option>
				<option value="690">690</option>
				<option value="700">700</option>
				<option value="710">710</option>
				<option value="720">720</option>
				<option value="730">730</option>
				<option value="740">740</option>
				<option value="750">750</option>
				<option value="760">760</option>
				<option value="770">770</option>
				<option value="780">780</option>
				<option value="790">790</option>
				<option value="800">800</option>
				<option value="810">810</option>
				<option value="820">820</option>
				<option value="830">830</option>
				<option value="840">840</option>
				<option value="850">850</option>
				<option value="860">860</option>
				<option value="870">870</option>
				<option value="880">880</option>
				<option value="890">890</option>
				<option value="900">900</option>
				<option value="910">910</option>
				<option value="920">920</option>
				<option value="930">930</option>
				<option value="940">940</option>
				<option value="950">950</option>
				<option value="960">960</option>
				<option value="970">970</option>
				<option value="980">980</option>
				<option value="990">990</option></select><br>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label" for="input-name"> Enabled: </label>
		<div class="controls">
			<select  name="dialplan_enabled" ng-model="vo.dialplan_enabled" ><option
					value="true">true</option>
				<option value="false">false</option></select><br>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label" for="input-name"> Description: </label>
		<div class="controls">
			<input  type="text"
				name="dialplan_description" ng-model="vo.dialplan_description" maxlength="255" value=""><br>
		</div>
	</div>

	<div class="form-actions">
		<button type="submit" class="btn btn-primary" ng-disabled="form.$invalid">Save</button>
		<a href="[{:u('timeconditions/index')}]" class="btn btn-info">Back</a>
	</div>
</form>

</block>